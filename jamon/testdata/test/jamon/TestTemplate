<%doc>here
is some starting doc.
    </%doc>The very top!
<%import>
  java.math.BigDecimal
</%import>

<%args>
  BigDecimal amount;
  int x => 3;
  int y => 7;
</%args>

Here is a template. It has two arguments:

<%doc></%doc>
<%doc>here
is some doc.
    </%doc>
<%doc>  asdfasdf  </%doc>
x, which is <% x %>,
and amount, which is <% amount %>.
%  for (int i = 0; i < y; ++i)
% {
i is <% i %>.
<%java> } </%java>

Some escaping stuff:

HTML Escaped: <% "&" %> <% ">" %> <% "<" %> <% "'" %> <% "\"" %>

XML escaped: <% "&"   |x  %> <% ">" |x%> <% "<"   |x %> <% "'" |x%> <% "\"" |x %>

URL escaped: <% "&"   |u  %> <% ">" |u%> <% "<"   |u %> <% "'" |u%> <% "\"" |u %>

Not escaped: <% "&"   |n  %> <% ">" |n%> <% "<"   |n %> <% "'" |n%> <% "\"" |n %>

This \
Should \
be \
all \
on \
one \
line.

No lines should be between here
\
\
and here.

This is a call: <& /test/jtt/SubTemplate; z => 3; y => "yes" &>
So is this: <& SubTemplate; z => 12; y => "no"; x => 1 &>

A call to a def: <& foo; qq => "yes" &>.
% for (int q = 0; q < 10; q++) {
<& foo; qq => "loop"; rr => q &>
% }

<%def foo>
  <%args>
    String qq;
    int rr => 7;
  </%args>
  in def foo. <% rr %></%def>

A call with a template fragment: \
% final int i = 3;
<|& Sub2; x => 5 &>This is the body <% i %>
<& foo; qq=>"yes"; rr => i+1 &>
<& SubTemplate; z => 77; y => "icky" &>
</&>

<%import>
  java.util.LinkedList
</%import>
3 more fragment calls:\
% final LinkedList list = new LinkedList();
<|& Sub2; x => 5 &>This is the body <% list.size() %>
% list.add(new Integer(x));
</&>
<|& Sub2; x => 5 &>This is the body <% list.size() %>
% list.add(new Integer(x));
</&>
<|& Sub2; x => 5 &>This is the body <% list.size() %>
% list.add(new Integer(x));
</&>
