<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!--    $Id$ -->
<html>
  <head>
    <title>Jamon: goals</title>
  </head>

  <body>

    <h1>Goals</h1>

    <div style="{ font-size: smaller }">
      (Not all of these will be met in the first release(s).  In fact,
      some will <emph>never</emph> be met).
    </div>

    <ul>
      <li>
        Developers must pass information to the view according to a
        well-defined contract which is checkable at compile-time
        (i.e., an interface, probably).  In other words the the
        devoloper and the web-designer should be able to define an API
        for the view.
      </li>
      <li>
        Web designers must be able to check that they have not
        violated the above contract
      </li>
      <li>
        Web designers should be able to test the page easily aginst
        test data with none of the developer's code present (apart,
        perhaps from the above interface)
      </li>
      <li>
        The approach may be compatible with JSP
      </li>
      <li>
        The approach may be compatible with template engines such as
        Velocity
      </li>
      <li>
        The approach may (probably!) have to develop its own template
        engine
      </li>
      <li>
        It should be possible to use the approach for views other than
        web-pages.  For example, sending e-mails with the same look
        and feel (possibly with the same HTML) as a web page
      </li>
      <li>
        It may (probably not) be possible to implement the view in
        languages other than Java
      </li>
      <li>
        Generate Java class(es) corresponding to each template. Avoid
        reflection in generated code.
      </li>
      <li>
        Use a template directly, without compilation. For example,
        <pre>
import org.modusponens.templates.MyTemplate;

...

MyTemplate t = ...;

t.Process("hello", 3, new ThingAMaJig(17.5));
</pre>
      </li>
      <li>
        Minimize (eliminate?) need for java "escapes". A template with
        no java escapes is guaranteed to result in syntactically
        correct java code. Though we could parse the java escape
        ourselves and verify syntax at least (semantics would be
        prohibitively difficult). By pre-verifying syntax, the java
        compiler error messages are most likely intelligible.
      </li>
      <li>
        Facilitate development (e.g. automatic recompilation if
        template modified)
      </li>
      <li>
        Facilitate decomposition and reuse (e.g. both public and
        private methods)
      </li>
      <li>
        Errors detected as early as possible. Provide good error
        messages.
      </li>
    </ul>

    <h2>Why other approaches aren't right</h2>
    <ul>
      <li>
        Some, like JSP, combine controller and view. JSP forces to use
        servlets, making it unsuitable for use to e.g. create email
        bodies.
      </li>

      <li>
        The types of values that can be passed between templates is
        often limited to strings.
      </li>

      <li>
        Most are untyped: a template doesn't specify what inputs it
        requires, what inputs are optional, or the types of these
        things.
      </li>

      <li>
        Most don't allow passing "fragments" of a template as a
        parameter to other templates.
      </li>
    </ul>


    <h2>Canonical Rendering Problems</h2>

    <ul>
      <li>
        Render a recursive data structure, such as an expanded
        directory tree
      </li>
      <li>
        Render a table with every 5th line inverted in color
      </li>
      <li>
        Iterate through two or more arrays simultaneously (or even
        slightly out of sync)
      </li>
    </ul>
  </body>
</html>
